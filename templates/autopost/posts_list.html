{% load static i18n %}

<html>
    <head>
        <link rel="stylesheet" href="{% static 'css/posts-list.css' %}">
        <title>{% trans 'Posts' %}</title>
    </head>

    <body>
        <div class="app-container">
          <div class="app-header">
            <div class="app-header-left">
              <span class="app-icon"></span>
              <p class="app-name">BabylonBot</p>

              <!--div class="search-wrapper">
                <input class="search-input" type="text" placeholder="Search">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" class="feather feather-search" viewBox="0 0 24 24">
                  <defs></defs>
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="M21 21l-4.35-4.35"></path>
                </svg>
              </div-->

            </div>

            <div class="app-header-right">
              <a class="add-btn" href="{% url 'new_post' %}" title="Add New Post">
                <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" 
                    stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus">
                  <line x1="12" y1="5" x2="12" y2="19" />
                  <line x1="5" y1="12" x2="19" y2="12" /></svg>
              </a>
              <button class="notification-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">
                  <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                  <path d="M13.73 21a2 2 0 0 1-3.46 0" /></svg>
              </button>
              <button class="profile-btn">
                  <img src="{% static 'images/userfavicon.jpg' %}" />
                <span> {{ request.user.username | title }} </span>
              </button>
            </div>
            <button class="messages-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" 
                  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-circle">
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" />
              </svg>
            </button>
          </div>


          <div class="app-content">
            <div class="app-sidebar">
              <a href="" class="app-sidebar-link active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                  <polyline points="9 22 9 12 15 12 15 22" />
                </svg>
              </a>

              <a href="{% url 'new_post' %}" class="app-sidebar-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" 
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" 
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
                      <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                      <line x1="16" y1="2" x2="16" y2="6" />
                      <line x1="8" y1="2" x2="8" y2="6" />
                      <line x1="3" y1="10" x2="21" y2="10" />
                    </svg>
              </a>

              <a href="#" class="app-sidebar-link">
                <svg class="link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-pie-chart" viewBox="0 0 24 24">
                  <defs />
                  <path d="M21.21 15.89A10 10 0 118 2.83M22 12A10 10 0 0012 2v10z" />
                </svg>
              </a>

              <a href="/tAzaOQ7K1XqSxnM6b7/" class="app-sidebar-link">
                <svg class="link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-settings" viewBox="0 0 24 24">
                  <defs />
                  <circle cx="12" cy="12" r="3" />
                  <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
                </svg>
              </a>
            </div>


            <div class="projects-section">
              <div class="projects-section-header">
                <p>Etoro Posts</p>
                <p class="time">{% now "SHORT_DATETIME_FORMAT" %}</p>
              </div>
              <div class="projects-section-line">
                <div class="projects-status">
                  <div class="item-status">
                      <span class="status-number">{{ data.pending.count }}</span>
                    <span class="status-type">Pending</span>
                  </div>
                  <div class="item-status">
                      <span class="status-number">{{ data.posted.count }}</span>
                    <span class="status-type">Posted</span>
                  </div>
                  <div class="item-status">
                      <span class="status-number">{{ data.all_posts.count }}</span>
                    <span class="status-type">Total Posts</span>
                  </div>
                </div>

                <div class="view-actions">
                  <button class="view-btn list-view active" title="List View">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list">
                      <line x1="8" y1="6" x2="21" y2="6" />
                      <line x1="8" y1="12" x2="21" y2="12" />
                      <line x1="8" y1="18" x2="21" y2="18" />
                      <line x1="3" y1="6" x2="3.01" y2="6" />
                      <line x1="3" y1="12" x2="3.01" y2="12" />
                      <line x1="3" y1="18" x2="3.01" y2="18" /></svg>
                  </button>
                </div>
              </div>

              <div class="project-boxes jsGridView">
                  {% for post in data.all_posts %}
                      <a class="project-box-wrapper" href="{% url 'post_detail' post.id %}">
                          <div class="project-box" style="background-color: #d5deff;">
                            <div class="project-box-header">
                                <span>{{post.post_time}}</span>
                              <div class="more-wrapper">
                                <button class="project-btn-more">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                      viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                      stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical">
                                    <circle cx="12" cy="12" r="1" />
                                    <circle cx="12" cy="5" r="1" />
                                    <circle cx="12" cy="19" r="1" /></svg>
                                </button>
                              </div>
                            </div>
                            <div class="project-box-content-header">
                              <p class="box-content-header">Content</p>
                              <p class="box-content-subheader">{{post.content | truncatechars:40 }}</p>
                            </div>
                            <div class="box-progress-wrapper">
                              <p class="box-progress-header">Progress</p>
                              {% if post.status == 'A'%}
                                  <div class="box-progress-bar">
                                    <span class="box-progress" style="width: 20%; background-color: #4f3ff0"></span>
                                  </div>
                                  <p class="box-progress-percentage">20%</p>
                              {% else %} 
                                  <div class="box-progress-bar">
                                    <span class="box-progress" style="width: 100%; background-color: #4f3ff0"></span>
                                  </div>
                                  <p class="box-progress-percentage">100%</p>
                              {% endif %}
                            </div>
                            <div class="project-box-footer">
                              <div class="participants">
                                  <img src="{% static 'images/userfavicon.jpg' %}" alt="participant">
                              </div>
                              <div class="days-left" style="color: #4f3ff0;">
                                  {%if post.status == 'A'%}
                                    Pending {% else %} Posted {% endif %}
                              </div>
                            </div>
                          </div>
                        </a>
                {% endfor %}
          </div>
        </div>

        <div class="messages-section">
          <div class="projects-section-header">
            <p>Latest Upload Reports</p>
          </div>

          <div class="messages">
            {% for rpt in data.reports %}
                <div class="message-box">
                    <img src="{% static 'images/browserfavicon.jpeg' %}" alt="favicon">
                  <div class="message-content">
                    <div class="message-header">
                        <div class="name">{{ rpt.post.content | truncatechars:20 }}</div>
                      <div class="star-checkbox">
                        <input type="checkbox" id="star-1">
                        <label for="star-1">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></svg>
                        </label>
                      </div>
                    </div>
                    <p class="message-line">
                       {{ rpt.notes | truncatechars:60 }} 
                    </p>
                    <p class="message-line time">
                    {{ rpt.timestamp }}
                    </p>
                  </div>
                </div>
            {% endfor %}
          </div>
    </div>
    </div>
    </div>

</html>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
          const bToggle = document.getElementById('b');
          bToggle.focus();

          const bought = document.getElementById('bought');
          const sold = document.getElementById('sold');

          bToggle.addEventListener('click', () => {
              sold.style.display = 'none';
              bought.style.display = 'block';
          });
          document.getElementById('s').addEventListener('click', () => {
              bought.style.display = 'none';
              sold.style.display = 'block';
          });
    });
</script>
